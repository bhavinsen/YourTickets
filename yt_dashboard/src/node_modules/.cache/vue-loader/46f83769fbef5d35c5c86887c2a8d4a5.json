{"remainingRequest":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/martijn/Documents/projects/yourtickets/yourticketsgit/yourtickets/yt_dashboard/src/views/event/Edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/martijn/Documents/projects/yourtickets/yourticketsgit/yourtickets/yt_dashboard/src/views/event/Edit.vue","mtime":1618405950341},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdFdmVudEVkaXQnLAogIGNvbXBvbmVudHM6ewogICAgJ0VkaXRUaWNrZXRzJzogKCkgPT4gaW1wb3J0KCdAL2NvbXBvbmVudHMvZXZlbnQvZWRpdC90aWNrZXRzLnZ1ZScpLAogICAgJ0VkaXRMaW5ldXAnOiAoKSA9PiBpbXBvcnQoJ0AvY29tcG9uZW50cy9ldmVudC9lZGl0L2xpbmV1cC52dWUnKSwKICAgICdFZGl0RGVzaWduJzogKCkgPT4gaW1wb3J0KCdAL2NvbXBvbmVudHMvZXZlbnQvZWRpdC9kZXNpZ24nKSwKICB9LAogIG1vdW50ZWQoKXsKICAgIHRoaXMuc2hvd0xvYWRlcigpOwogICAgdGhpcy5nZW5lcmFsX2Vycm9ycyA9IGZhbHNlOwogICAgdGhpcy50aWNrZXRzX2Vycm9ycyA9IGZhbHNlOwogICAgdGhpcy5ldmVudCA9IHt9CgogICAgdGhpcy4kc3RvcmUuZ2V0dGVyc1snZXZlbnQvZ2V0RXZlbnQnXSh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpCiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMuZXZlbnQgPSByZXNwb25zZS5kYXRhCiAgICAgICAgdGhpcy5jaGVja19mb3JtcygpCiAgICAgIH0pCiAgICAgIC5maW5hbGx5KCgpID0+IHRoaXMubG9hZGluZyA9IGZhbHNlKQogIH0sCiAgY29tcHV0ZWQ6ewogICAgY29tcHV0ZWRTdGFydERhdGUgKCkgewogICAgICByZXR1cm4gdGhpcy5mb3JtYXREYXRlKHRoaXMuZXZlbnQuc3RhcnRfZGF0ZSk7CiAgICB9LAogICAgY29tcHV0ZWRFbmREYXRlICgpIHsKICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0RGF0ZSh0aGlzLmV2ZW50LmVuZF9kYXRlKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHZhbF90aXRsZV9yZXF1aXJlZCAodmFsdWUpIHsKICAgICAgaWYodHlwZW9mIHZhbHVlID09PSAidW5kZWZpbmVkIikgcmV0dXJuIHRydWUKICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuYWRkTWVzc2FnZSgndGl0bGUnLCAnUmVxdWlyZWQnKQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJlbW92ZU1lc3NhZ2UoJ3RpdGxlJywgJ1JlcXVpcmVkJykKCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0sCiAgICB2YWxfc3RhcnRkYXRlX2JlbG93X2VuZGRhdGUodmFsdWUpewogICAgICBpZih0eXBlb2YgdmFsdWUgPT09ICJ1bmRlZmluZWQiKSByZXR1cm4gdHJ1ZQogICAgICBpZih0aGlzLmV2ZW50LnN0YXJ0X2RhdGUgPiB0aGlzLmV2ZW50LmVuZF9kYXRlKXsKICAgICAgICB0aGlzLmFkZE1lc3NhZ2UoJ3N0YXJ0X2RhdGUnLCAnU3RhcnQgZGF0dW0ga2FuIG5pZXQgbmEgZGUgZWluZCBkYXR1bScpCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9ZWxzZXsKICAgICAgICB0aGlzLnJlbW92ZU1lc3NhZ2UoJ3N0YXJ0X2RhdGUnLCAnU3RhcnQgZGF0dW0ga2FuIG5pZXQgbmEgZGUgZWluZCBkYXR1bScpCgogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9LAogICAgdmFsX2VuZGRhdGVfYWJvdmVfc3RhcnRkYXRlKHZhbHVlKXsKICAgICAgaWYodHlwZW9mIHZhbHVlID09PSAidW5kZWZpbmVkIikgcmV0dXJuIHRydWUKICAgICAgaWYodGhpcy5ldmVudC5lbmRfZGF0ZSA8IHRoaXMuZXZlbnQuc3RhcnRfZGF0ZSl7CiAgICAgICAgdGhpcy5hZGRNZXNzYWdlKCdlbmRfZGF0ZScsICdFaW5kIGRhdHVtIGthbiBuaWV0IHZvb3IgZGUgc3RhcnQgZGF0dW0nKQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfWVsc2V7CiAgICAgICAgdGhpcy5yZW1vdmVNZXNzYWdlKCdlbmRfZGF0ZScsICdFaW5kIGRhdHVtIGthbiBuaWV0IHZvb3IgZGUgc3RhcnQgZGF0dW0nKQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIHJlbW92ZU1lc3NhZ2UoZmllbGROYW1lLCBlcnJvck1lc3NhZ2UpewogICAgICB0aGlzLmxheW91dC5nZW5lcmFsX2Zvcm1bZmllbGROYW1lXS5zcGxpY2UodGhpcy5sYXlvdXQuZ2VuZXJhbF9mb3JtW2ZpZWxkTmFtZV0uaW5kZXhPZihlcnJvck1lc3NhZ2UpLCAxKQogICAgICBsZXQgZXJyb3JfZm91bmQgPSBmYWxzZQogICAgICBmb3IobGV0IGZpZWxkIGluIHRoaXMubGF5b3V0LmdlbmVyYWxfZm9ybSl7CiAgICAgICAgaWYodGhpcy5sYXlvdXQuZ2VuZXJhbF9mb3JtW2ZpZWxkXS5sZW5ndGggPiAwKXsKICAgICAgICAgIGVycm9yX2ZvdW5kID0gdHJ1ZQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5sYXlvdXQuZ2VuZXJhbF9lcnJvcnMgPSBlcnJvcl9mb3VuZAoKICAgIH0sCiAgICBhZGRNZXNzYWdlKGZvcm0sIGZpZWxkTmFtZSwgZXJyb3JNZXNzYWdlKXsKICAgICAgaWYoZm9ybSA9PT0gJ2dlbmVyYWwnKSB7CiAgICAgICAgdGhpcy5sYXlvdXQuZ2VuZXJhbF9lcnJvcnMgPSB0cnVlCiAgICAgICAgdGhpcy5sYXlvdXQuZ2VuZXJhbF9mb3JtW2ZpZWxkTmFtZV0ucHVzaChlcnJvck1lc3NhZ2UpCiAgICAgIH0KICAgICAgaWYoZm9ybSA9PT0gJ3RpY2tldHMnKXsKICAgICAgICB0aGlzLmxheW91dC50aWNrZXRzX2Vycm9ycyA9IHRydWUKICAgICAgfQogICAgfSwKICAgIGZvcm1hdERhdGUgKGRhdGUpIHsKICAgICAgaWYgKCFkYXRlKSByZXR1cm4gbnVsbAoKICAgICAgY29uc3QgW3llYXIsIG1vbnRoLCBkYXldID0gZGF0ZS5zcGxpdCgnLScpCiAgICAgIHJldHVybiBgJHtkYXl9LSR7bW9udGh9LSR7eWVhcn1gCiAgICB9LAogICAgc2hvd0xvYWRlcigpewogICAgICB0aGlzLmxvYWRpbmcgPSB0aGlzLmxvYWRpbmdfdGV4dDsKICAgIH0sCiAgICBoaWRlTG9hZGVyKCl7CiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgfSwKCiAgICB1cGRhdGVfZXZlbnQoKXsKICAgICAgdGhpcy5zaG93TG9hZGVyKCk7CgogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZXZlbnQvVVBEQVRFX0VWRU5UJywgdGhpcy5ldmVudCkKICAgICAgICAgIC50aGVuKCgpID0+ewogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2xheW91dC9pc0V2ZW50UGFnZScsIHsKICAgICAgICAgICAgICBpc0V2ZW50UGFnZTogdHJ1ZSwKICAgICAgICAgICAgICBldmVudF9pZDogdGhpcy4kcm91dGUucGFyYW1zLmlkLAogICAgICAgICAgICAgIGV2ZW50OiB0aGlzLmV2ZW50CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMuY2hlY2tfZm9ybXMoKQogICAgICAgICAgfSkKICAgICAgICAgIC5maW5hbGx5KCgpID0+IHRoaXMubG9hZGluZyA9IGZhbHNlKQogICAgfSwKICAgIHB1Ymxpc2goKXsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2V2ZW50L3B1Ymxpc2gnLCB7aWQ6dGhpcy5ldmVudC5pZH0pCiAgICAgICAgICAudGhlbigoKSA9PnsKCiAgICAgICAgICAgIHRoaXMuZXZlbnQuZXZlbnRfcHVibGljID0gdHJ1ZTsKICAgICAgICAgIH0pCiAgICAgICAgICAuZmluYWxseSgoKSA9PiB0aGlzLmxvYWRpbmcgPSBmYWxzZSkKICAgIH0sCiAgICB1bnB1Ymxpc2goKXsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2V2ZW50L3VucHVibGlzaCcsIHtpZDp0aGlzLmV2ZW50LmlkfSkKICAgICAgICAgIC50aGVuKCgpID0+ewoKICAgICAgICAgICAgdGhpcy5ldmVudC5ldmVudF9wdWJsaWMgPSBmYWxzZTsKICAgICAgICAgIH0pCiAgICAgICAgICAuZmluYWxseSgoKSA9PiB0aGlzLmxvYWRpbmcgPSBmYWxzZSkKICAgIH0sCiAgICBjaGVja19mb3JtcygpewogICAgICB0aGlzLiRzdG9yZS5nZXR0ZXJzWydldmVudC9jaGVja19wdWJsaXNoJ10odGhpcy4kcm91dGUucGFyYW1zLmlkKQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLmxheW91dC5nZW5lcmFsX2Vycm9ycyA9IGZhbHNlCiAgICAgICAgICAgIHRoaXMubGF5b3V0LnRpY2tldHNfZXJyb3JzID0gZmFsc2UKCiAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuZm9ybXMuZ2VuZXJhbF9mb3JtICE9PSB0cnVlKXsKICAgICAgICAgICAgICBmb3IobGV0IGZpZWxkIGluIHJlc3BvbnNlLmRhdGEuZm9ybXMuZ2VuZXJhbF9mb3JtKXsKCiAgICAgICAgICAgICAgICBmb3IobGV0IG1lc3NhZ2VPYmogb2YgcmVzcG9uc2UuZGF0YS5mb3Jtcy5nZW5lcmFsX2Zvcm1bZmllbGRdKXsKICAgICAgICAgICAgICAgICAgdGhpcy5hZGRNZXNzYWdlKCdnZW5lcmFsJywgZmllbGQsIG1lc3NhZ2VPYmoubWVzc2FnZSkKICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2FkZCBtZXNzYWdlJykKICAgICAgICAgICAgICAgICAgLy8gdGhpcy5sYXlvdXQuZ2VuZXJhbF9mb3JtW2ZpZWxkXS5wdXNoKG1lc3NhZ2VPYmoubWVzc2FnZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gdGhpcy5sYXlvdXQuZ2VuZXJhbF9lcnJvcnMgPSB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5mb3Jtcy50aWNrZXRzX2Zvcm0gIT09IHRydWUpewogICAgICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZSgndGlja2V0cycpCiAgICAgICAgICAgIH0KCiAgICAgICAgICB9KQogICAgICAgICAgLmZpbmFsbHkoKCkgPT4gdGhpcy5sb2FkaW5nID0gZmFsc2UpCiAgICB9CiAgfSwKCiAgZGF0YTogKCkgPT4gKHsKICAgIC8vYXBpS2V5OidBSXphU3lDUGRtcHZPSzRkY3o2VTRETjhIRXd1MzUzT3E0c0tnSG8nLAogICAgcnVsZXM6IHsKICAgICAgJ3RpdGxlJzogWwogICAgICAgIC8vKHZhbHVlKSA9PiAhIXZhbHVlIHx8ICdSZXF1aXJlZC4nLAogICAgICAgICh2YWx1ZSkgPT4gewogICAgICAgICAgaWYodmFsdWUgPT09ICcnKXsKICAgICAgICAgICAgdGhpcy5sYXlvdXQuZ2VuZXJhbF9lcnJvcnMgPSB0cnVlCiAgICAgICAgICAgIHJldHVybiAncmVxdWlyZWQnCiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgIH0KICAgICAgXSwKICAgIH0sCiAgICBsb2FkaW5nOnRydWUsCiAgICBsb2FkaW5nX3RleHQ6IHRydWUgKyAnIGdyZWVuIGFjY2VudC00JywKICAgIHN0YXJ0X2RhdGVfbWVudTogZmFsc2UsCiAgICBlbmRfZGF0ZV9tZW51OiBmYWxzZSwKICAgIGRhdGU6ICcnLAogICAgZXZlbnQ6IHt9LAogICAgbGF5b3V0OiB7CiAgICAgIHB1Ymxpc2hCdXR0b25FbmFibGVkOiBmYWxzZSwKICAgICAgZ2VuZXJhbF9lcnJvcnM6IGZhbHNlLAogICAgICB0aWNrZXRzX2Vycm9yczogZmFsc2UsCiAgICAgIGdlbmVyYWxfZm9ybTp7CiAgICAgICAgdGl0bGU6W10sCiAgICAgICAgc3RhcnRfZGF0ZTpbXSwKICAgICAgICBlbmRfZGF0ZTpbXQogICAgICB9CiAgICB9CgoKICB9KQoKfQoK"},{"version":3,"sources":["Edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA","file":"Edit.vue","sourceRoot":"views/event","sourcesContent":["<template>\n  <v-card  :loading=\"loading\" loader-height=\"5\" width=\"960\"\n           class=\"mx-auto\"\n  >\n  <v-card-title>\n    <v-alert\n        :value=\"event.event_public\"\n        prominent\n        type=\"success\"\n        outlined\n        dense\n        width=\"100%\"\n        border=\"left\"\n    >\n      <v-row align=\"center\">\n        <v-col >Je event staat live</v-col>\n        <v-col class=\"text-right\">\n          <v-btn @click=\"unpublish\" class=\"mr-6\" color=\"primary\">Un publish</v-btn>\n          <v-btn :href=\"event.url\"  color=\"primary\" target=\"_blank\">preview</v-btn>\n        </v-col>\n      </v-row>\n    </v-alert>\n    <v-alert\n        :value=\"!event.event_public\"\n        prominent\n        type=\"error\"\n        outlined\n        dense\n        width=\"100%\"\n        border=\"left\"\n    >\n      <v-row align=\"center\">\n        <v-col class=\"grow\">\n          Je event staat niet gepubliceerd\n          <v-list dense>\n            <v-list-item>yay</v-list-item>\n\n          </v-list>\n        </v-col>\n        <v-col class=\"shrink\">\n          <v-btn color=\"success\" @click=\"publish\" :disabled=\"(layout.general_errors || layout.tickets_errors)\">Publish</v-btn>\n        </v-col>\n      </v-row>\n    </v-alert>\n  </v-card-title>\n\n    <v-tabs\n        color=\"white accent-4\"\n      background-color=\"primary\"\n    >\n\n      <v-tab>\n        <v-icon left>mdi-pencil</v-icon>\n        <v-badge\n            color=\"red\"\n            content=\"!\"\n            offset-x=\"-1\"\n            :value=\"layout.general_errors\"\n        >\n          Algemene informatie\n        </v-badge>\n      </v-tab>\n\n      <v-tab>\n        <v-icon left>mdi-ticket</v-icon>\n        <v-badge\n            color=\"red\"\n            content=\"!\"\n            offset-x=\"-1\"\n            :value=\"layout.tickets_errors\"\n        >\n          Tickets\n        </v-badge>\n      </v-tab>\n      <v-tab>\n        <v-icon left>mdi-account-group</v-icon>\n        Line-up\n      </v-tab>\n      <v-tab>\n        <v-icon left>mdi-pencil-ruler</v-icon>\n        Design\n      </v-tab>\n\n\n      <v-tab-item >\n        <v-card flat>\n          <v-card-text>\n            <v-text-field label=\"Title\" name=\"title\" :rules=\"[val_title_required]\" :error-messages=\"layout.general_form.title\" v-model=\"event.title\" required></v-text-field>\n            <v-text-field label=\"Locatie\" name=\"location\" v-model=\"event.location\"></v-text-field>\n            <v-row cols=\"4\">\n              <v-col>\n                <v-menu\n                    v-model=\"start_date_menu\"\n                    :close-on-content-click=\"false\"\n                    transition=\"scale-transition\"\n                    offset-y\n                    max-width=\"290px\"\n                    min-width=\"290px\"\n                >\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-text-field\n                        v-model=\"computedStartDate\"\n                        autocomplete=\"false\"\n                        name=\"start_date\"\n                        label=\"Start date\"\n                        hint=\"DD-MM-YYYY format\"\n                        persistent-hint\n                        :rules=\"[val_startdate_below_enddate]\"\n                        :error-messages=\"layout.general_form.start_date\"\n                        v-bind=\"attrs\"\n                        v-on=\"on\"\n                    ></v-text-field>\n                  </template>\n                  <v-date-picker v-model=\"event.start_date\" no-title @input=\"start_date_menu = false\"></v-date-picker>\n                </v-menu>\n              </v-col>\n              <v-col>\n                <v-text-field label=\"Start Tijd\" name=\"start_time\" v-model=\"event.start_time\"></v-text-field>\n              </v-col>\n              <v-divider vertical></v-divider>\n              <v-col>\n                <v-menu\n                    v-model=\"end_date_menu\"\n                    :close-on-content-click=\"false\"\n                    transition=\"scale-transition\"\n                    offset-y\n                    max-width=\"290px\"\n                    min-width=\"290px\"\n\n                >\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-text-field\n                        v-model=\"computedEndDate\"\n                        autocomplete=\"false\"\n                        :rules=\"[val_enddate_above_startdate]\"\n                        name=\"end_date\"\n                        label=\"Eind date\"\n                        hint=\"DD-MM-YYYY format\"\n                        persistent-hint\n                        readonly\n                        v-bind=\"attrs\"\n                        v-on=\"on\"\n                        :error-messages=\"layout.general_form.end_date\"\n                    ></v-text-field>\n                  </template>\n                  <v-date-picker v-model=\"event.end_date\" no-title @input=\"end_date_menu = false\"></v-date-picker>\n                </v-menu>\n              </v-col>\n              <v-col>\n                <v-text-field label=\"Eind Tijd\" name=\"end_time\" v-model=\"event.end_time\"></v-text-field>\n              </v-col>\n\n            </v-row><v-textarea\n                name=\"description\"\n                v-model=\"event.description\"\n                flat\n                label=\"Description\"\n                auto-grow\n                value=\"\"\n            ></v-textarea>\n          </v-card-text>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"primary\" :disabled=\"this.layout.general_errors\" v-on:click=\"update_event\">Opslaan</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-tab-item>\n      <v-tab-item>\n        <EditTickets v-bind:event=\"event\" @hide_loader=\"hideLoader\" @check_forms=\"check_forms\" @show_loader=\"showLoader\"></EditTickets>\n      </v-tab-item>\n      <v-tab-item>\n        <EditLineup v-bind:event=\"event\" @hide_loader=\"hideLoader\" @show_loader=\"showLoader\"></EditLineup>\n      </v-tab-item>\n      <v-tab-item>\n        <EditDesign v-bind:event=\"event\" @hide_loader=\"hideLoader\" @show_loader=\"showLoader\"></EditDesign>\n      </v-tab-item>\n    </v-tabs>\n\n  </v-card>\n</template>\n\n<script>\n\n\nexport default {\n  name: 'EventEdit',\n  components:{\n    'EditTickets': () => import('@/components/event/edit/tickets.vue'),\n    'EditLineup': () => import('@/components/event/edit/lineup.vue'),\n    'EditDesign': () => import('@/components/event/edit/design'),\n  },\n  mounted(){\n    this.showLoader();\n    this.general_errors = false;\n    this.tickets_errors = false;\n    this.event = {}\n\n    this.$store.getters['event/getEvent'](this.$route.params.id)\n      .then((response) => {\n        this.event = response.data\n        this.check_forms()\n      })\n      .finally(() => this.loading = false)\n  },\n  computed:{\n    computedStartDate () {\n      return this.formatDate(this.event.start_date);\n    },\n    computedEndDate () {\n      return this.formatDate(this.event.end_date);\n    }\n  },\n  methods: {\n    val_title_required (value) {\n      if(typeof value === \"undefined\") return true\n      if (value.length === 0) {\n        this.addMessage('title', 'Required')\n        return false;\n      } else {\n        this.removeMessage('title', 'Required')\n\n        return true;\n      }\n    },\n    val_startdate_below_enddate(value){\n      if(typeof value === \"undefined\") return true\n      if(this.event.start_date > this.event.end_date){\n        this.addMessage('start_date', 'Start datum kan niet na de eind datum')\n        return false;\n      }else{\n        this.removeMessage('start_date', 'Start datum kan niet na de eind datum')\n\n        return true;\n      }\n    },\n    val_enddate_above_startdate(value){\n      if(typeof value === \"undefined\") return true\n      if(this.event.end_date < this.event.start_date){\n        this.addMessage('end_date', 'Eind datum kan niet voor de start datum')\n        return false;\n      }else{\n        this.removeMessage('end_date', 'Eind datum kan niet voor de start datum')\n\n        return true;\n      }\n    },\n    removeMessage(fieldName, errorMessage){\n      this.layout.general_form[fieldName].splice(this.layout.general_form[fieldName].indexOf(errorMessage), 1)\n      let error_found = false\n      for(let field in this.layout.general_form){\n        if(this.layout.general_form[field].length > 0){\n          error_found = true\n        }\n      }\n\n      this.layout.general_errors = error_found\n\n    },\n    addMessage(form, fieldName, errorMessage){\n      if(form === 'general') {\n        this.layout.general_errors = true\n        this.layout.general_form[fieldName].push(errorMessage)\n      }\n      if(form === 'tickets'){\n        this.layout.tickets_errors = true\n      }\n    },\n    formatDate (date) {\n      if (!date) return null\n\n      const [year, month, day] = date.split('-')\n      return `${day}-${month}-${year}`\n    },\n    showLoader(){\n      this.loading = this.loading_text;\n    },\n    hideLoader(){\n      this.loading = false;\n    },\n\n    update_event(){\n      this.showLoader();\n\n      this.$store.dispatch('event/UPDATE_EVENT', this.event)\n          .then(() =>{\n            this.$store.commit('layout/isEventPage', {\n              isEventPage: true,\n              event_id: this.$route.params.id,\n              event: this.event\n            })\n            this.check_forms()\n          })\n          .finally(() => this.loading = false)\n    },\n    publish(){\n      this.$store.dispatch('event/publish', {id:this.event.id})\n          .then(() =>{\n\n            this.event.event_public = true;\n          })\n          .finally(() => this.loading = false)\n    },\n    unpublish(){\n      this.$store.dispatch('event/unpublish', {id:this.event.id})\n          .then(() =>{\n\n            this.event.event_public = false;\n          })\n          .finally(() => this.loading = false)\n    },\n    check_forms(){\n      this.$store.getters['event/check_publish'](this.$route.params.id)\n          .then(response => {\n            this.layout.general_errors = false\n            this.layout.tickets_errors = false\n\n            if(response.data.forms.general_form !== true){\n              for(let field in response.data.forms.general_form){\n\n                for(let messageObj of response.data.forms.general_form[field]){\n                  this.addMessage('general', field, messageObj.message)\n                  // console.log('add message')\n                  // this.layout.general_form[field].push(messageObj.message)\n                }\n              }\n              // this.layout.general_errors = true\n            }\n            if(response.data.forms.tickets_form !== true){\n              this.addMessage('tickets')\n            }\n\n          })\n          .finally(() => this.loading = false)\n    }\n  },\n\n  data: () => ({\n    //apiKey:'AIzaSyCPdmpvOK4dcz6U4DN8HEwu353Oq4sKgHo',\n    rules: {\n      'title': [\n        //(value) => !!value || 'Required.',\n        (value) => {\n          if(value === ''){\n            this.layout.general_errors = true\n            return 'required'\n          }\n          return true\n        }\n      ],\n    },\n    loading:true,\n    loading_text: true + ' green accent-4',\n    start_date_menu: false,\n    end_date_menu: false,\n    date: '',\n    event: {},\n    layout: {\n      publishButtonEnabled: false,\n      general_errors: false,\n      tickets_errors: false,\n      general_form:{\n        title:[],\n        start_date:[],\n        end_date:[]\n      }\n    }\n\n\n  })\n\n}\n\n</script>\n"]}]}