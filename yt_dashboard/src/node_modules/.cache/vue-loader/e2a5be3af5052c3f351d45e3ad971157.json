{"remainingRequest":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/martijn/Documents/projects/yourtickets/yourticketsgit/yourtickets/yt_dashboard/src/views/event/Saleschannels.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/martijn/Documents/projects/yourtickets/yourticketsgit/yourtickets/yt_dashboard/src/views/event/Saleschannels.vue","mtime":1618405950341},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0V2ZW50U2FsZXNjaGFubmVscycsCiAgbW91bnRlZCgpIHsKICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2V2ZW50X3NhbGVzY2hhbm5lbHMvZ2V0YWxsJ10odGhpcy4kcm91dGUucGFyYW1zLmlkKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy5zYWxlc2NoYW5uZWxzID0gcmVzcG9uc2UuZGF0YS5jaGFubmVscwoKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHRoaXMubG9hZGluZz1mYWxzZSkKICB9LAogIG1ldGhvZHM6ewogICAgc2V0VXBsb2FkRmlsZShmaWxlKXsKICAgICAgdGhpcy5ndWVzdGxpc3QgPSBmaWxlOwogICAgfSwKICAgIGNyZWF0ZUNoYW5uZWwoKXsKICAgICAgdGhpcy5sYXlvdXQuZWRpdGVkSW5kZXggPSAtMTsKICAgICAgdGhpcy5sYXlvdXQuZWRpdF9kaWFsb2cgPSB0cnVlOwoKICAgIH0sCiAgICBlZGl0Q2hhbm5lbChpdGVtKXsKICAgICAgY29uc29sZS5sb2coaXRlbSkKICAgICAgdGhpcy5sYXlvdXQuZWRpdF9kaWFsb2cgPSB0cnVlOwogICAgICB0aGlzLmxheW91dC5lZGl0ZWRJbmRleCA9IHRoaXMuc2FsZXNjaGFubmVscy5pbmRleE9mKGl0ZW0pCiAgICAgIHRoaXMubGF5b3V0LmVkaXRlZEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBpdGVtKQogICAgfSwKICAgIHNhdmUoKXsKICAgICAgaWYgKHRoaXMuZWRpdGVkSW5kZXggPT09IC0xKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2V2ZW50X3NhbGVzY2hhbm5lbHMvY3JlYXRlJywgewogICAgICAgICAgJ2V2ZW50X2lkJzogdGhpcy4kcm91dGUucGFyYW1zLmlkLAogICAgICAgICAgJ25hbWUnOiB0aGlzLmxheW91dC5lZGl0ZWRJdGVtLm5hbWUKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy5zYWxlc2NoYW5uZWxzLnB1c2gocmVzcG9uc2UuZGF0YS5zYWxlc2NoYW5uZWwpCiAgICAgICAgICB0aGlzLmxheW91dC5lZGl0X2RpYWxvZyA9IGZhbHNlCiAgICAgICAgICB0aGlzLmxheW91dC5lZGl0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5sYXlvdXQuZGVmYXVsdEl0ZW0pCiAgICAgICAgICB0aGlzLmVkaXRlZEluZGV4ID0gLTEKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHRoaXMubG9hZGluZyA9IGZhbHNlKQogICAgICB9ZWxzZXsKICAgICAgICAvLwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdldmVudF9zYWxlc2NoYW5uZWxzL3VwZGF0ZScsIHsKICAgICAgICAgICdldmVudF9pZCc6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwKICAgICAgICAgICdzYWxlc2NoYW5uZWxfaWQnOiB0aGlzLmxheW91dC5lZGl0ZWRJdGVtLmlkLAogICAgICAgICAgJ25hbWUnOiB0aGlzLmxheW91dC5lZGl0ZWRJdGVtLm5hbWUKICAgICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIC8vIHRoaXMuc2FsZXNjaGFubmVscy5wdXNoKHJlc3BvbnNlLmRhdGEuc2FsZXNjaGFubmVsKQogICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLnNhbGVzY2hhbm5lbHNbdGhpcy5sYXlvdXQuZWRpdGVkSW5kZXhdLCB0aGlzLmxheW91dC5lZGl0ZWRJdGVtKQogICAgICAgICAgdGhpcy5sYXlvdXQuZWRpdF9kaWFsb2cgPSBmYWxzZQogICAgICAgICAgdGhpcy5sYXlvdXQuZWRpdGVkSW5kZXggPSAtMTsKICAgICAgICAgIHRoaXMubGF5b3V0LmVkaXRlZEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmxheW91dC5kZWZhdWx0SXRlbSkKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHRoaXMubG9hZGluZyA9IGZhbHNlKQogICAgICB9CiAgICB9LAogICAgZGVsZXRlQ2hhbm5lbChpdGVtKXsKICAgICAgdGhpcy5sYXlvdXQuZWRpdGVkSW5kZXggPSB0aGlzLnNhbGVzY2hhbm5lbHMuaW5kZXhPZihpdGVtKQogICAgICB0aGlzLmxheW91dC5lZGl0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSkKICAgICAgdGhpcy5sYXlvdXQuZGVsZXRlX2RpYWxvZyA9IHRydWUKICAgIH0sCiAgICBkZWxldGVDb25maXJtKCl7CgoKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2V2ZW50X3NhbGVzY2hhbm5lbHMvZGVsZXRlJywgewogICAgICAgICdldmVudF9pZCc6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwKICAgICAgICAnc2FsZXNjaGFubmVsX2lkJzogdGhpcy5sYXlvdXQuZWRpdGVkSXRlbS5pZAogICAgICB9KQogICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5zYWxlc2NoYW5uZWxzLnNwbGljZSh0aGlzLmxheW91dC5lZGl0ZWRJbmRleCwgMSkKICAgICAgICB0aGlzLmNsb3NlRGVsZXRlKCkKICAgICAgfSkKICAgICAgLmZpbmFsbHkoKCkgPT4gdGhpcy5sb2FkaW5nID0gZmFsc2UpCgoKCiAgICB9LAogICAgY2xvc2VEZWxldGUgKCkgewogICAgICB0aGlzLmxheW91dC5kZWxldGVfZGlhbG9nID0gZmFsc2UKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMubGF5b3V0LmVkaXRlZEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmxheW91dC5kZWZhdWx0SXRlbSkKICAgICAgICB0aGlzLmxheW91dC5lZGl0ZWRJbmRleCA9IC0xCiAgICAgIH0pCiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZvcm1UaXRsZSAoKSB7CiAgICAgIHJldHVybiB0aGlzLmxheW91dC5lZGl0ZWRJbmRleCA9PT0gLTEgPyAnQ3JlYXRlIG5ldyBzYWxlcyBjaGFubmVsJyA6ICdFZGl0IHNhbGVzIGNoYW5uZWwnCiAgICB9LAogIH0sCiAgZGF0YTogKCk9Pih7CiAgICBsYXlvdXQ6ewogICAgICBkZWxldGVfZGlhbG9nOmZhbHNlLAogICAgICBlZGl0X2RpYWxvZzpmYWxzZSwKCiAgICAgIGVkaXRlZEluZGV4OiAtMSwKICAgICAgZWRpdGVkSXRlbTogewogICAgICAgIG5hbWU6ICcnCiAgICAgIH0sCiAgICAgIGRlZmF1bHRJdGVtOiB7CiAgICAgICAgbmFtZTogJycKICAgICAgfSwKICAgIH0sCgogICAgbG9hZGluZzpmYWxzZSwKICAgIGhlYWRlcnM6WwogICAgICB7IHRleHQ6ICdDaGFubmVsIG5hbWUnLCB2YWx1ZTogJ25hbWUnIH0sCiAgICAgIHsgdGV4dDogJ1JldmVudWUnLCB2YWx1ZTogJ3RvdGFsJyB9LAogICAgICB7IHRleHQ6ICdBY3Rpb25zJywgdmFsdWU6ICdhY3Rpb25zJywgc29ydGFibGU6IGZhbHNlIH0sCiAgICBdLAogICAgc2FsZXNjaGFubmVsczpbXSwKICB9KQp9Cgo="},{"version":3,"sources":["Saleschannels.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Saleschannels.vue","sourceRoot":"views/event","sourcesContent":["<template>\n  <v-card>\n\n    <v-card-title class=\"blue white--text\">\n      <span class=\"headline\">Sales channels</span>\n      <v-spacer></v-spacer>\n      <v-btn color=\"white\" @click=\"createChannel\" >Create sales channel</v-btn>\n    </v-card-title>\n    <v-card-actions>\n\n    </v-card-actions>\n\n    <v-dialog v-model=\"layout.delete_dialog\" max-width=\"500px\">\n      <v-card>\n        <v-card-title class=\"headline\">Are you sure you want to delete this item?</v-card-title>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"blue darken-1\" text @click=\"closeDelete\">Cancel</v-btn>\n          <v-btn color=\"blue darken-1\" text @click=\"deleteConfirm\">OK</v-btn>\n          <v-spacer></v-spacer>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <v-dialog\n        v-model=\"layout.edit_dialog\"\n        max-width=\"600px\"\n    >\n      <v-card>\n        <v-card-title>{{formTitle}}</v-card-title>\n        <v-card-text>\n          <v-text-field v-model=\"layout.editedItem.name\" label=\"Channel name\"></v-text-field>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"primary\" @click=\"save\">Opslaan</v-btn>\n        </v-card-actions>\n      </v-card>\n\n    </v-dialog>\n\n\n    <v-data-table\n        :headers=\"headers\"\n        :items=\"saleschannels\"\n        item-key=\"id\"\n        :loading=\"loading\"\n    >\n      <template v-slot:item.title=\"{ item }\">\n        <router-link>{{item.title}}</router-link>\n      </template>\n      <template v-slot:item.actions=\"{ item }\">\n        <v-icon small class=\"mr-2\" @click=\"editChannel(item)\">mdi-pencil</v-icon>\n        <v-icon small @click=\"deleteChannel(item)\">mdi-delete</v-icon>\n      </template>\n    </v-data-table>\n\n\n  </v-card>\n</template>\n\n<script>\n\nexport default {\n  name: 'EventSaleschannels',\n  mounted() {\n    this.loading = true\n    this.$store.getters['event_saleschannels/getall'](this.$route.params.id)\n        .then((response) => {\n          this.saleschannels = response.data.channels\n\n        })\n        .finally(() => this.loading=false)\n  },\n  methods:{\n    setUploadFile(file){\n      this.guestlist = file;\n    },\n    createChannel(){\n      this.layout.editedIndex = -1;\n      this.layout.edit_dialog = true;\n\n    },\n    editChannel(item){\n      console.log(item)\n      this.layout.edit_dialog = true;\n      this.layout.editedIndex = this.saleschannels.indexOf(item)\n      this.layout.editedItem = Object.assign({}, item)\n    },\n    save(){\n      if (this.editedIndex === -1) {\n        this.$store.dispatch('event_saleschannels/create', {\n          'event_id': this.$route.params.id,\n          'name': this.layout.editedItem.name\n        })\n        .then((response) => {\n          this.saleschannels.push(response.data.saleschannel)\n          this.layout.edit_dialog = false\n          this.layout.editedItem = Object.assign({}, this.layout.defaultItem)\n          this.editedIndex = -1\n        })\n        .finally(() => this.loading = false)\n      }else{\n        //\n        this.$store.dispatch('event_saleschannels/update', {\n          'event_id': this.$route.params.id,\n          'saleschannel_id': this.layout.editedItem.id,\n          'name': this.layout.editedItem.name\n        })\n        .then(() => {\n          // this.saleschannels.push(response.data.saleschannel)\n          Object.assign(this.saleschannels[this.layout.editedIndex], this.layout.editedItem)\n          this.layout.edit_dialog = false\n          this.layout.editedIndex = -1;\n          this.layout.editedItem = Object.assign({}, this.layout.defaultItem)\n        })\n        .finally(() => this.loading = false)\n      }\n    },\n    deleteChannel(item){\n      this.layout.editedIndex = this.saleschannels.indexOf(item)\n      this.layout.editedItem = Object.assign({}, item)\n      this.layout.delete_dialog = true\n    },\n    deleteConfirm(){\n\n\n      this.$store.dispatch('event_saleschannels/delete', {\n        'event_id': this.$route.params.id,\n        'saleschannel_id': this.layout.editedItem.id\n      })\n      .then(() => {\n        this.saleschannels.splice(this.layout.editedIndex, 1)\n        this.closeDelete()\n      })\n      .finally(() => this.loading = false)\n\n\n\n    },\n    closeDelete () {\n      this.layout.delete_dialog = false\n      this.$nextTick(() => {\n        this.layout.editedItem = Object.assign({}, this.layout.defaultItem)\n        this.layout.editedIndex = -1\n      })\n    },\n  },\n  computed: {\n    formTitle () {\n      return this.layout.editedIndex === -1 ? 'Create new sales channel' : 'Edit sales channel'\n    },\n  },\n  data: ()=>({\n    layout:{\n      delete_dialog:false,\n      edit_dialog:false,\n\n      editedIndex: -1,\n      editedItem: {\n        name: ''\n      },\n      defaultItem: {\n        name: ''\n      },\n    },\n\n    loading:false,\n    headers:[\n      { text: 'Channel name', value: 'name' },\n      { text: 'Revenue', value: 'total' },\n      { text: 'Actions', value: 'actions', sortable: false },\n    ],\n    saleschannels:[],\n  })\n}\n\n</script>"]}]}